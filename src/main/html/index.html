<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello, World!</title>

    <!-- Common CSS -->
    <link rel="stylesheet" href="../styles/main.css"/>
    <link rel="stylesheet" href="../styles/common/common.css"/>
    <link rel="stylesheet" type="text/css" href="../styles/fonts/fonts.css" nonce="ZXh0ZXJuYWwgc2NyaXB0cw=="/>

    <!-- Less scripts -->
    <!-- [TODO: Change the architecture to load these as plain css (without less) and while loading respective plugin] -->
    <link rel="stylesheet/less" type="text/css" href="../styles/window-grid/window-grid.less"/>
    <link rel="stylesheet/less" type="text/css" href="../styles/common/tool-tip.less"/>
    <link rel="stylesheet/less" type="text/css" href="../styles/plugins/Welcome/welcome-logs.less"/>
    <link rel="stylesheet/less" type="text/css" href="../styles/plugins/LogFileViewer/LogFileViewer-logs.less"/>
    <link rel="stylesheet/less" type="text/css" href="../styles/plugins/Clipboard/Clipboard.less"/>

    <!-- Plain CSS -->
    <link rel="stylesheet" type="text/css" href="../styles/plugins/Authenticator/tfa-manager.css" nonce="ZXh0ZXJuYWwgc2NyaXB0cw=="/>
    <link rel="stylesheet" type="text/css" href="../styles/plugins/ServerInfo/server_info.css" nonce="ZXh0ZXJuYWwgc2NyaXB0cw=="/>
    <link rel="stylesheet" type="text/css" href="../styles/common/menu.css" nonce="ZXh0ZXJuYWwgc2NyaXB0cw=="/>
    <link rel="stylesheet" type="text/css" href="../styles/common/login.css" nonce="ZXh0ZXJuYWwgc2NyaXB0cw=="/>

    <!-- External/third-party CSS files -->
    <link rel="stylesheet" type="text/css" href="../../plugins/fontawesome/5.9.0/css/all.min.css"/>
    <link rel="stylesheet" type="text/css" href="../../plugins/mocha/6.2.0/mocha.css" />
    <link rel="stylesheet" type="text/css" href="../../plugins/billboard/1.8.1/billboard.css" nonce="ZXh0ZXJuYWwgc2NyaXB0cw==" />

    <!-- Local scripts -->
    <script type="text/javascript" src="../scripts/utils/util_current_datetime.js"></script>
    <script type="text/javascript" src="../scripts/utils/util_console.js"></script>
    <script>
        less = {
            env: "development",
            async: false,
            fileAsync: false,
            poll: 1000,
            functions: {},
            ieCompat: false,
            javascriptEnabled: true,
            dumpLineNumbers: "comments",
        };
    </script>

    <!-- start external scripts -->
    <!-- LESS: Remove in LIVE -->
    <script type="text/javascript" src="../../plugins/less/less.js"></script>

    <!-- billboard.js -->
    <script type="text/javascript" nonce="ZXh0ZXJuYWwgc2NyaXB0cw==" src="../../plugins/d3/5.9.2/d3.js"></script>
    <script type="text/javascript" nonce="ZXh0ZXJuYWwgc2NyaXB0cw==" src="../../plugins/billboard/1.8.1/billboard.js"></script>

    <!-- hterm -->
    <script type="text/javascript" nonce="ZXh0ZXJuYWwgc2NyaXB0cw==" src="../scripts/external-edited/hterm_all.js"></script>
    <script type="text/javascript" nonce="ZXh0ZXJuYWwgc2NyaXB0cw==" src="../../plugins/libdot/third_party/punycode/lib_punycode.js"></script>
    <script type="text/javascript" src="../../plugins/libdot/js/lib_event.js"></script>

    <!-- simplebar: scrollbar -->
    <script type="text/javascript" nonce="ZXh0ZXJuYWwgc2NyaXB0cw==" src="../../plugins/simplebar/4.0.0/simplebar.min.js"></script>

    <!-- jailed -->
    <script nonce="ZXh0ZXJuYWwgc2NyaXB0cw==" src="../../plugins/jailed/jailed-0.3.1/lib/jailed.js"></script>

    <!-- end external scripts -->
</head>
<body style="border-radius: 5px;">
<!--<div id="login">-->
<!--    <script>-->
<!--        let api = {-->
<!--            alert: alert,-->
<!--            querySelector: document.querySelector-->
<!--        };-->
<!--        let plugin = new jailed.Plugin("https://muse.am/web/scripts/login.js", api);-->
<!--        // let code = "application.remote.alert('Hello from the plugin!');";-->
<!--        // let plugin = new jailed.DynamicPlugin(code, api);-->

<!--    </script>-->
<!--</div>-->
<div id="login"></div>
<div id="grid-container" style="width: 100%; height: 100%">
</div>

<script type="text/javascript" nonce="ZXh0ZXJuYWwgc2NyaXB0cw==">
    setInterval.__proto__.unref = function () {};

    const RootTabMapByID = new Map(); // TODO: FOR DEMO PURPOSE ONLY
    const RootTabMapByContainer = new Map(); // TODO: FOR DEMO PURPOSE ONLY
    const TabContent = new Map(); // TODO: FOR DEMO PURPOSE ONLY
    const SSHTabs = new Map(); // TODO: FOR DEMO PURPOSE ONLY
    const ActiveTab = {}; // TODO: FOR DEMO PURPOSE ONLY
    const SystemInfo = new Map(); // TODO: FOR DEMO PURPOSE ONLY
    const SystemInfoCallback = new Map(); // TODO: FOR DEMO PURPOSE ONLY

    const Observable = require('../scripts/utils/util_observable');
    const Observer = require('../scripts/utils/util_observer');
    const FindFiles = require('../scripts/utils/util_find_files');
    const LocalDB = require('../scripts/utils/util_local_db');
    const UtilsUI = require("../scripts/utils/util_dom");
    const utilListeners = require("../scripts/utils/util_listeners");
    const Resize = require("../scripts/utils/util_resize");
    const utilResizer = require('../scripts/utils/util_resizer');
    const { Matrix, MatrixNode, MatrixUtil } = require('../scripts/utils/util_matrix');
    const Grid = require('../scripts/utils/util_grid');
    const Socket = require('../scripts/utils/util_socket_comm');
    const Jailed = jailed;
    const userSettings = require('electron-settings');
    const SSHConnect = require('../scripts/ssh/SSH');
    require('../scripts/utils/util_clipboard');
    require('../scripts/assistants/dialogflow/dialogflow');

    const VERTICAL = 2;
    const HORIZONTAL= 4;
    const RIGHT = 8;
    const LEFT = 16;
    const TOP = 32;
    const BOTTOM = 64;
    const COLUMN = 128;
    const ROW = 256;
    const FLOOR = 512;
    const CEIL = 1024;
    const ROUND = 2048;
    const GridElements = new Map();
    let server = "local";
    let Plugins = null; /* TODO: INSECURE -- REMOVE AFTER RE-ARCHITECTURE */

    // regular constants
    const RESIZE_MARGIN = 4;

    // tabObject
    let tabObject = null;

    // let gridManager = new CSSGridManager.CSSGrid(document.querySelector("#grid-container"));

    /* TODO: REMOVE THIS BLOCK FROM HERE SO THAT NOT EVERYONE HAS ACCESS TO GRIDWINDOW */
    // let GridWindow = require('../scripts/window-grid/window-grid');
    // const gridWindow_ = new GridWindow("#grid-container", "#grid-container > div > .resize-handle");
    // GridWindow = null;

    // Init the process with default on load logic
    // require("../scripts/globals");
    require('../scripts/window-grid/desktop'); //create the desktop window

    // Add minimize, maximize and close functionality to window
    require("../scripts/window-grid/title-bar");

    const PluginRegister = require('../scripts/plugins/plugin');
    require('../scripts/cpu-data');
</script>
<!-- MOCHA -->
<script type="text/javascript" src="../scripts/external-edited/mocha.js"></script>
<script type="text/javascript" src="../../plugins/chai/4.2.0/chai.js"></script>
<script type="module" class="mocha-init">
    mocha.setup({
        ui: 'bdd',
        ignoreLeaks: false,
        asyncOnly: true,
        globals: ['*']
    });
    mocha.checkLeaks();
</script>
<!--<script src="../../test/spec.js"></script>-->
<!-- script type="module" class="mocha-exec">
    // require("../../test/browser/test-util_css_grid_manager");
    require("../../test/browser/util/test-util_matrix");
    // require("../../test/browser/util/test-util_grid");
    setTimeout(() => mocha.run(), 1000);
</script -->
</body>
</html>